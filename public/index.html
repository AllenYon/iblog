<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    
    <title>Alin Blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="做成一件有意义的事">
<meta property="og:type" content="website">
<meta property="og:title" content="Alin Blog">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Alin Blog">
<meta property="og:description" content="做成一件有意义的事">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Alin Blog">
<meta name="twitter:description" content="做成一件有意义的事">
    

    
        <link rel="alternate" href="/" title="Alin Blog" type="application/atom+xml" />
    

    

    <link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/libs/open-sans/styles.css">
    <link rel="stylesheet" href="/libs/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">

    <script src="/libs/jquery/2.1.3/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">
    
    
        <link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css">
    
    
    
    


</head>

<body>
    <div id="container">
        <header id="header">
    <div id="header-main" class="header-inner">
        <div class="outer">
            <a href="/" id="logo">
                <i class="logo"></i>
                <span class="site-title">Alin Blog</span>
            </a>
            <nav id="main-nav">
                
                    <a class="main-nav-link" href="/.">Home</a>
                
                    <a class="main-nav-link" href="/archives">Archives</a>
                
                    <a class="main-nav-link" href="/about">About</a>
                
            </nav>
            
                
                <nav id="sub-nav">
                    <div class="profile" id="profile-nav">
                        <a id="profile-anchor" href="javascript:;">
                            <img class="avatar" src="/css/images/avatar.png" />
                            <i class="fa fa-caret-down"></i>
                        </a>
                    </div>
                </nav>
            
            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Buscar" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Entradas',
            PAGES: 'Pages',
            CATEGORIES: 'Categorias',
            TAGS: 'Etiquetas',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
        </div>
    </div>
    <div id="main-nav-mobile" class="header-sub header-inner">
        <table class="menu outer">
            <tr>
                
                    <td><a class="main-nav-link" href="/.">Home</a></td>
                
                    <td><a class="main-nav-link" href="/archives">Archives</a></td>
                
                    <td><a class="main-nav-link" href="/about">About</a></td>
                
                <td>
                    
    <div class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Buscar" />
    </div>

                </td>
            </tr>
        </table>
    </div>
</header>

        <div class="outer">
            
                

<aside id="profile">
    <div class="inner profile-inner">
        <div class="base-info profile-block">
            <img id="avatar" src="/css/images/avatar.png" />
            <h2 id="name">阿霖</h2>
            <h3 id="title">产品经理&amp;程序员</h3>
            <span id="location"><i class="fa fa-map-marker"></i>Hangzhou, China</span>
            <a id="follow" target="_blank" href="https://weibo.com/nvolume">SEGUIR</a>
        </div>
        <div class="article-info profile-block">
            <div class="article-info-block">
                27
                <span>Entradas</span>
            </div>
            <div class="article-info-block">
                1
                <span>Etiqueta</span>
            </div>
        </div>
        
        <div class="profile-block social-links">
            <table>
                <tr>
                    
                    
                    <td>
                        <a href="http://github.com/linkyan" target="_blank" title="github" class=tooltip>
                            <i class="fa fa-github"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/" target="_blank" title="twitter" class=tooltip>
                            <i class="fa fa-twitter"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/" target="_blank" title="facebook" class=tooltip>
                            <i class="fa fa-facebook"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/" target="_blank" title="dribbble" class=tooltip>
                            <i class="fa fa-dribbble"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/" target="_blank" title="rss" class=tooltip>
                            <i class="fa fa-rss"></i>
                        </a>
                    </td>
                    
                </tr>
            </table>
        </div>
        
    </div>
</aside>

            
            <section id="main">
    <article id="post-2017年年终总结" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2018/02/15/2017年年终总结/">2017年年终总结</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2018/02/15/2017年年终总结/">
            <time datetime="2018-02-14T21:59:27.000Z" itemprop="datePublished">2018-02-15</time>
        </a>
    </div>


                        
                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/work/">work</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <h2 id="一-2017年工作成果概括"><a href="#一-2017年工作成果概括" class="headerlink" title="一. 2017年工作成果概括"></a>一. 2017年工作成果概括</h2><p>2017年初转岗产品经理后，工作方式和方法的改变给我个人带来了不小的挑战，需要重新从一个新人的状态投入到工作中。克服了很多不适应，坚持做了下来。以下是今年的主要工作产出结果概括：</p>
<ol>
<li>TT产品迭代。</li>
<li>美联网盘</li>
<li>内网统一搜索</li>
<li>Todo系统</li>
<li>美联新零售业务</li>
<li>其他：PMO，蘑客联盟</li>
</ol>
<h2 id="二-TT产品迭代"><a href="#二-TT产品迭代" class="headerlink" title="二. TT产品迭代"></a>二. TT产品迭代</h2><p>今年有一半的时候继续投入到TT产品的迭代中，经历了若干个版本的迭代，TT产品功能和稳定性较去年有了很多提升。以下是今年主要新增功能：</p>
<ol>
<li>年会/春节红包</li>
<li>2017/2018年度数据</li>
<li>集成OpenVPN</li>
<li>截屏分享</li>
<li>日历同步</li>
<li>部门信息</li>
<li>休假信息</li>
<li>消息撤回</li>
<li>免密登录</li>
<li>TT票圈优化</li>
</ol>
<p>产出:<br>累计聊天数，较2016年增长412.5%，达到132,100,544条<br>活跃用户数/集团人数，占比保持在97%</p>
<h2 id="三-美联网盘产品"><a href="#三-美联网盘产品" class="headerlink" title="三. 美联网盘产品"></a>三. 美联网盘产品</h2><p>目标：提供给集团内部高并发高可靠安全的文件存储产品，基于TT产品提供便捷的上传，下载，转发，搜索和在线浏览等功能。</p>
<p>产出：<br><img src="http://s3.mogucdn.com/mlcdn/c45406/180215_2cb4cbf9ji2b01g6hl80kk4ifbkej_2114x1368.png" alt=""></p>
<p>数据统计</p>
<ol>
<li>累计上传量:20万+</li>
<li>累计下载量:30万+</li>
<li>日均上传700+次</li>
<li>日均下载1000+次</li>
</ol>
<p><img src="http://s3.mogucdn.com/mlcdn/c45406/180215_84c697k4d675eibbf085a9i3hchck_1982x770.png" alt=""></p>
<p><img src="http://s3.mogucdn.com/mlcdn/c45406/180215_25c7gddjlfjll900dd4j72dla9l24_1976x764.png" alt=""></p>
<h2 id="四-内网统一搜索产品"><a href="#四-内网统一搜索产品" class="headerlink" title="四. 内网统一搜索产品"></a>四. 内网统一搜索产品</h2><p>目标：提升工作效率，沉淀集团知识。对以下数据源进行统一收录，BBS，WIKI，Gitlab，美联网盘，员工主数据</p>
<p>产出</p>
<p><img src="http://s3.mogucdn.com/mlcdn/c45406/180215_65ak78hd39i9ji3j18b09ggkhec7j_2212x1104.jpg" alt=""></p>
<p>数据统计：</p>
<p><img src="http://s11.mogucdn.com/mlcdn/c45406/180215_5gkb410c3ih7kfl89b5574ah0b429_878x204.jpg" alt=""></p>
<h2 id="五-Todo系统"><a href="#五-Todo系统" class="headerlink" title="五. Todo系统"></a>五. Todo系统</h2><p>需求背景：目前公司已采购了JIRA作为项目管理工具，同时在JIRA上开发了一套PMO系统，来定制化项目管理系统。同时Teambition即将到期下线。而Todo系统并不是重复造轮子，而想要作为JIRA，PMO，Teambition和口头任务等 任务管理系统的补充解决方案，提供便捷的，安全性高，流程简单的任务管理系统。特点是：</p>
<ol>
<li>便利性：用户可以在随时随地在移动端给群里的成员 布置任务，同时桌面端也会同步到。 利用TT群聊的便利性，快速创建一个群来发布任务。</li>
<li>安全性：仅群内成员可以查看任务，避免JIRA，Teambition等系统没有权限控制</li>
<li>流程简单：Todo系统仅将任务设计了两种状态，进行中和已完成。 非常适合小任务的发布。</li>
</ol>
<p>产出<br><img src="http://s3.mogucdn.com/mlcdn/c45406/180215_2bcj8jkl1h3ae8bd0d56j8b44hd1i_2114x1368.png" alt=""></p>
<p>数据统计<br><img src="http://s3.mogucdn.com/mlcdn/c45406/180215_69l14h9ck6k381elik6d5gabbh4g5_1620x346.png" alt=""></p>
<h2 id="六-美联新零售业务"><a href="#六-美联新零售业务" class="headerlink" title="六. 美联新零售业务"></a>六. 美联新零售业务</h2><p>CEO提出美联新零售概念后，参与了超级小店导购，公众号管理，独立店铺小程序等项目的产品策划和执行。之后由于业务调整，暂无产出。</p>
<p>产出：<br><img src="http://s3.mogucdn.com/mlcdn/c45406/180215_4if43h69kgd108032838dlkd9f173_750x1334.jpg" alt=""><br><img src="http://s3.mogucdn.com/mlcdn/c45406/180215_2hjj2k513ek3hbidh6123c3f1c249_750x1334.jpg" alt=""><br><img src="http://s3.mogucdn.com/mlcdn/c45406/180215_370d5bl43i430g583gl0592c984ke_1498x1106.png" alt=""></p>
<h2 id="七-个人成长"><a href="#七-个人成长" class="headerlink" title="七. 个人成长"></a>七. 个人成长</h2><p>思维方式</p>
<ul>
<li>产品思维和技术思维。产品思维，我可以理解为需要不断强调自己要站在用户的角度看问题，一秒变成傻瓜，去使用自己的产品，而不是以前的技术思维，即时非常难用的产品我也可以摸索出使用方案，并且从开发者的角度去思考为什么他这么设计，是不是因为技术原因。 比如说，微信撤回消息2分钟过期，没有查答案前，我以为是技术原因导致的，后来才知道，如果一个用户可以撤回N天前的约定或承诺，现实场景总将非常麻烦。</li>
<li>经营思维。 根本上经营的本质是赚取利润，利润是收入减支出。经营公司，带领团队或产品决策上都不应该离开这个原则。我做这个事情是为了获取收入，还是降低成本，如果都没有，那这个事情的优先级是很低的。比如说下半年做的TT票圈优化需求，回头来看这个项目是比较失败的，商业化可能性低或没有坚决执行下去，对于集体内部效率提升不明显。</li>
</ul>
<p>读书</p>
<ul>
<li>感谢微信图书应用，2017年我一共看了20本书，读书时长169小时。主要图书类型是 互联网相关，其次是金融股票。甘感触比较多的是稻盛和夫的《干法》，学习了一种哲学思想，你为什么而工作。肯.布兰佳的《新版一分钟经理人》，主管和员工之间如何高效的沟通工作目标，工作反馈和奖罚。Paul Graham《黑客和画家》，影响很深的是《不能说的话》一章，跳出正常思考范畴，不要被束缚。金融类彼得林奇的《战胜华尔街》。</li>
</ul>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://yoursite.com/2018/02/15/2017年年终总结/" data-id="cjdnn3tm0001grpfyy9evurur" class="article-share-link"><i class="fa fa-share"></i>Compartir</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <article id="post-hello-world" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2018/02/15/hello-world/">Hello World</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2018/02/15/hello-world/">
            <time datetime="2018-02-14T20:49:39.472Z" itemprop="datePublished">2018-02-15</time>
        </a>
    </div>


                        
                        
                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://yoursite.com/2018/02/15/hello-world/" data-id="cjdnn3tlx001crpfy8bsjwjwi" class="article-share-link"><i class="fa fa-share"></i>Compartir</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <article id="post-2013-11-28-picasso" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2013/11/28/2013-11-28-picasso/">Android Picasso-强大的图片下载缓存类库</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2013/11/28/2013-11-28-picasso/">
            <time datetime="2013-11-27T16:00:00.000Z" itemprop="datePublished">2013-11-28</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/Android/">Android</a>
    </div>

                        
                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <p><a href="https://github.com/JakeWharton" target="_blank" rel="noopener">Jake Wharton</a>大牛写的又一力作,链式API的优雅,类库的简洁,谁用谁喜欢.</p>
<p>GitHub 项目地址-&gt;<a href="https://github.com/square/picasso" target="_blank" rel="noopener">https://github.com/square/picasso</a></p>
<p>###简介</p>
<p>在你的Android应用程序如果想要显示大量图片,而且视觉效果丰富,高效稳定,需要大量的基础工作.Picasso可以帮你完成这些工作,通常只需要一行代码!</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Picasso.with(context).load(&quot;http://i.imgur.com/DvpvklR.png&quot;).into(imageView);</span><br></pre></td></tr></table></figure>
<p>Many common pitfalls of image loading on Android are handled automatically by Picasso:</p>
<p>Handling ImageView recycling and download cancelation in an adapter.<br>Complex image transformations with minimal memory use.<br>Automatic memory and disk caching.</p>
<p>在Android中很多图片加载时的陷阱都由Picaaso帮你自动处理:</p>
<ul>
<li>在Adapter中处理ImageView的回收和下载取消</li>
<li>使用最小的内存完成复杂的图像变化</li>
<li>自动完成内存和磁盘缓存</li>
</ul>
<p>###特性</p>
<p>####Adapter</p>
<p>Adapter中完成下载显示,并自动取消上一个下载请求</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">@Override public void getView(int position, View convertView, ViewGroup parent) &#123;</span><br><span class="line">  SquaredImageView view = (SquaredImageView) convertView;</span><br><span class="line">  if (view == null) &#123;</span><br><span class="line">    view = new SquaredImageView(context);</span><br><span class="line">  &#125;</span><br><span class="line">  String url = getItem(position);</span><br><span class="line"></span><br><span class="line">  Picasso.with(context).load(url).into(view);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>####图像转换</p>
<p>转换图片以更适应放入布局中,有效减少内存</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Picasso.with(context)</span><br><span class="line">  .load(url)</span><br><span class="line">  .resize(50, 50)</span><br><span class="line">  .centerCrop()</span><br><span class="line">  .into(imageView)</span><br></pre></td></tr></table></figure>
<p>你也可以手工处理,以实现更高级的效果</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">public class CropSquareTransformation implements Transformation &#123;</span><br><span class="line">  @Override public Bitmap transform(Bitmap source) &#123;</span><br><span class="line">    int size = Math.min(source.getWidth(), source.getHeight());</span><br><span class="line">    int x = (source.getWidth() - size) / 2;</span><br><span class="line">    int y = (source.getHeight() - size) / 2;</span><br><span class="line">    Bitmap result = Bitmap.createBitmap(source, x, y, size, size);</span><br><span class="line">    if (result != source) &#123;</span><br><span class="line">      source.recycle();</span><br><span class="line">    &#125;</span><br><span class="line">    return result;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  @Override public String key() &#123; return &quot;square()&quot;; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>####预留图片</p>
<p>下载图片完成前或错误时,Picasso提供一个预留图片(placeholer)API,加载默认图片.</p>
<p>####加载资源</p>
<p>Resources, assets, files, content providers,在Picasso中都是支持加载的.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Picasso.with(context).load(R.drawable.landing_screen).into(imageView1);</span><br><span class="line">Picasso.with(context).load(new File(&quot;/images/oprah_bees.gif&quot;)).into(imageView2);</span><br></pre></td></tr></table></figure>
<p>####当然也有缺点</p>
<ol>
<li><p>我们会发现,当我们想要获取缓存Bitmap的文件时,Picasso并没有这样的API,你只有在子线程中获取bitmap后,在存储一次.原因与HttpResponseCache类有关.</p>
</li>
<li><p>还没有对GIF做支持,我尝试过去支持,但是发现改动实在太大,遂放弃.老老实实用原来的.</p>
</li>
<li><p>超长图,还是用WebView解决吧,Picasso也做不到</p>
</li>
</ol>
<p>####谁在用?</p>
<p>豆瓣,蘑菇街,花瓣</p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://yoursite.com/2013/11/28/2013-11-28-picasso/" data-id="cjdnn3tlz001erpfyf8bssej8" class="article-share-link"><i class="fa fa-share"></i>Compartir</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <article id="post-2013-10-30-display-gif" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2013/10/30/2013-10-30-display-gif/">Android中显示动画的GIF-Movie类解决方案</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2013/10/30/2013-10-30-display-gif/">
            <time datetime="2013-10-29T16:00:00.000Z" itemprop="datePublished">2013-10-30</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/Android/">Android</a>
    </div>

                        
                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <p>首先看看GIF文件的存储结构和动画原理–&gt;<a href="http://blog.sina.com.cn/s/blog_571296860100jvhz.html" target="_blank" rel="noopener">[转]GIF图片的文件储存结构和动画原理</a></p>
<p>以及已知的两种解决方案–&gt;<a href="http://weavora.com/blog/2012/02/07/android-how-to-use-animated-gif/" target="_blank" rel="noopener">Android &amp; how to use animated GIF</a></p>
<p>Github上还算可以的开源项目–&gt;<a href="https://github.com/sbakhtiarov/gif-movie-view" target="_blank" rel="noopener">gif-movie-view</a></p>
<p>但实际使用的时候,还是有些小问题,比如</p>
<p>我们的GIF不全是本地已经存在的,可能是从文件加载,或者是网络下载的,这时候在使用Movie.decodeStream(InputStream is)时会遇到</p>
<ul>
<li><a href="http://stackoverflow.com/questions/18307266/ioexception-on-movie-decodefile-android" target="_blank" rel="noopener">IOException on Movie.decodeFile() - android</a></li>
<li><a href="http://stackoverflow.com/questions/10240042/ioexception-cannot-load-file" target="_blank" rel="noopener">IOException - Cannot load file</a></li>
</ul>
<p>我的做法是统一使用Movie.decodeByteArray(byte[] b) 类方法,可以避免很多麻烦,下载 <a href="https://github.com/sbakhtiarov/gif-movie-view" target="_blank" rel="noopener"><strong><em>gif-movie-view</em></strong></a><br> 项目,并在GifMovieView中添加</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public void setMovieByteArray(byte[] bb) &#123;</span><br><span class="line">      mMovie = Movie.decodeByteArray(bb, 0, bb.length);</span><br><span class="line">      requestLayout();</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>假如我们显示GIF的时候是异步的,那么在还没有显示时,GifMovieView不占据任何空间,完成加载后整个界面会重绘,因为GifMovieView重载的onMeasure()函数是这样子的:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line">  protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) &#123;</span><br><span class="line">      if (mMovie != null) &#123;</span><br><span class="line">          int movieWidth = mMovie.width();</span><br><span class="line">          int movieHeight = mMovie.height();</span><br><span class="line">	/*</span><br><span class="line">           * Calculate horizontal scaling</span><br><span class="line">	 */</span><br><span class="line"></span><br><span class="line">          float scaleH = 1f;</span><br><span class="line">          int measureModeWidth = MeasureSpec.getMode(widthMeasureSpec);</span><br><span class="line">          if (measureModeWidth != MeasureSpec.UNSPECIFIED) &#123;</span><br><span class="line">              int maximumWidth = MeasureSpec.getSize(widthMeasureSpec);</span><br><span class="line">              if (movieWidth &gt; maximumWidth) &#123;</span><br><span class="line">                  scaleH = (float) movieWidth / (float) maximumWidth;</span><br><span class="line">              &#125;</span><br><span class="line">          &#125;</span><br><span class="line">	/*</span><br><span class="line">           * calculate vertical scaling</span><br><span class="line">	 */</span><br><span class="line"></span><br><span class="line">          float scaleW = 1f;</span><br><span class="line">          int measureModeHeight = MeasureSpec.getMode(heightMeasureSpec);</span><br><span class="line"></span><br><span class="line">          if (measureModeHeight != MeasureSpec.UNSPECIFIED) &#123;</span><br><span class="line">              int maximumHeight = MeasureSpec.getSize(heightMeasureSpec);</span><br><span class="line">              if (movieHeight &gt; maximumHeight) &#123;</span><br><span class="line">                  scaleW = (float) movieHeight / (float) maximumHeight;</span><br><span class="line">              &#125;</span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">	/*</span><br><span class="line">           * calculate overall scale</span><br><span class="line">	 */</span><br><span class="line">          mScale = 1f / Math.max(scaleH, scaleW);</span><br><span class="line"></span><br><span class="line">          mMeasuredMovieWidth = (int) (movieWidth * mScale);</span><br><span class="line">          mMeasuredMovieHeight = (int) (movieHeight * mScale);</span><br><span class="line"></span><br><span class="line">          setMeasuredDimension(mMeasuredMovieWidth, mMeasuredMovieHeight);</span><br><span class="line"></span><br><span class="line">      &#125; else &#123;</span><br><span class="line">          /*</span><br><span class="line">           * No movie set, just set minimum available size.</span><br><span class="line">	 */</span><br><span class="line">	setMeasuredDimension(getSuggestedMinimumWidth(), getSuggestedMinimumHeight());</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>我们知道setMeasuredDimension(int width,int height);将指定View在父容器里占据的width,和height,假如你们的业务逻辑在得到GIF文件的URL同时,还能获得它的width和height,并且这里你不希望调用requestLayout()函数重绘,做了如下修改</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setMeasuredDimension(mWidth,mHeight);  //mWidth, mHeight 是已知Gif的宽高</span><br></pre></td></tr></table></figure>
<p>这个时候可能连显示也不正常了! 可能是因为父容器判断GifMovieView大小并没有发生改变,这样的话就不调用onLayout() 和 onDraw() 函数,也就没有开始GIF的动画循环,所以就是一片空白. 有待考证.</p>
<p>另外还有些注意点 比如API 11 之后不能使用硬件渲染:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> /**</span><br><span class="line">* Starting from HONEYCOMB have to turn off HW acceleration to draw</span><br><span class="line">* Movie on Canvas.</span><br><span class="line">   */</span><br><span class="line">   if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.HONEYCOMB) &#123;</span><br><span class="line">   	setLayerType(View.LAYER_TYPE_SOFTWARE, null);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p>###总结:<br>Movie的坑还是很多的,不像成品类库,相对于WebView来显示GIF的优势是轻量级,更易管理.</p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://yoursite.com/2013/10/30/2013-10-30-display-gif/" data-id="cjdnn3tlw001arpfydgcguply" class="article-share-link"><i class="fa fa-share"></i>Compartir</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <article id="post-2013-08-01-dynamic_load" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2013/08/01/2013-08-01-dynamic_load/">Custom Class Loading in Dalvik (译)</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2013/08/01/2013-08-01-dynamic_load/">
            <time datetime="2013-07-31T16:00:00.000Z" itemprop="datePublished">2013-08-01</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/Android/">Android</a>
    </div>

                        
                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <p><a href="http://android-developers.blogspot.com/2011/07/custom-class-loading-in-dalvik.html" target="_blank" rel="noopener">原文链接</a></p>
<p>Dalvik虚拟机为开发者执行自定类加载提供了便利。除了从本地加载Dalvik可执行文件(“dex”),应用程序可以从备选地点如内部存储或者网络上加载它们。</p>
<p>这种技术不是适用每个应用程序的，事实上，大部分没有使用这种技术的也工作的很好。然而，有些情况下自定义类加载会得心应手。这里有一对情景：</p>
<p>巨大的应用程序包含超过64k个方法引用，超出了在一个dex文件里支持的最大值。为了绕过这个限制，开发者可以将这个程序分成多个二级dex文件，然后在运行时加载它们。</p>
<p>开发者可以将它们的框架设计成执行逻辑具有很好的可扩展性，然后通过在运行时动态加载代码。</p>
<p>我们已经创建了一个<a href="https://code.google.com/p/android-custom-class-loading-sample/" target="_blank" rel="noopener">应用</a>来演示分割的dex文件和运行时类加载。（请注意，在下面讨论的原因，应用不能用ADT Eclipse plug-in 构建，而使用包含其中的Ant构建脚本,详细查看Readme.txt）</p>
<p>App有一个简单的Activity来调用一个类库组件以显示一个Toast.Activity和它的资源包含在默认的dex中，而类库代码是被存储在二级dex中并绑定在APK。这需要一个修改的构建过程，也就是接下来将详细展示的。</p>
<p>在类方法可以被调用前，App首先必须明确地加载二级dex文件。让我们看看这些相关的moving parts</p>
<h2 id="代码组织"><a href="#代码组织" class="headerlink" title="##代码组织"></a>##代码组织</h2><p>应用包含3个类</p>
<p>com.example.dex.MainActivity: UI component from which the library is invoked</p>
<p>com.example.dex.LibraryInterface: Interface definition for the library</p>
<p>com.example.dex.lib.LibraryProvider: Implementation of the library</p>
<p>类库被打包在一个二级dex中，而其余类包含在默认（主要的）dex文件中，“Build Process”章节说明了如何完成它。当然，打包策略依赖于特殊场景–开发者正要处理的问题。</p>
<h2 id="类加载和方法调用"><a href="#类加载和方法调用" class="headerlink" title="##类加载和方法调用"></a>##类加载和方法调用</h2><p>二级dex文件–含有LibraryProvider,存储为App的asset。首先，它必须拷贝到一个路径能被类加载器访问到的存储位置。示例App使用了App的私有内部存储空间做到了这点。（从技术上来说，外部存储也可以，但要考虑到将App二进制文件保存在那里的安全性问题）</p>
<p>下面片段来自MainActivity–使用标准文件I/O完成拷贝工作</p>
<pre><code>// Before the secondary dex file can be processed by the DexClassLoader,
  // it has to be first copied from asset resource to a storage location.
  File dexInternalStoragePath = new File(getDir(&quot;dex&quot;, Context.MODE_PRIVATE),
      SECONDARY_DEX_NAME);
  ...
  BufferedInputStream bis = null;
  OutputStream dexWriter = null；
  static final int BUF_SIZE = 8 * 1024;
  try {
  bis = new BufferedInputStream(getAssets().open(SECONDARY_DEX_NAME));
  dexWriter = new BufferedOutputStream(
      new FileOutputStream(dexInternalStoragePath));
  byte[] buf = new byte[BUF_SIZE];
  int len;
  while((len = bis.read(buf, 0, BUF_SIZE)) &gt; 0) {
      dexWriter.write(buf, 0, len);
  }
  dexWriter.close();
  bis.close();
  } catch (. . .) {...}
</code></pre><p>接着，DexClassLoader被实例化去加载来自提取出来的二级dex文件的类库。有两种方式去调用加载了的类方法以这种方式。在示例中，类实例转换成接口，然后直接调用方法。</p>
<p>另一个途径是使用反射API调用方法。使用反射的优点是它不要求二级dex文件去实现任何特殊的接口，然而你应该察觉到反射很啰嗦而且慢。</p>
<pre><code>// Internal storage where the DexClassLoader writes the optimized dex file to
final File optimizedDexOutputPath = getDir(&quot;outdex&quot;, Context.MODE_PRIVATE);

DexClassLoader cl = new DexClassLoader(dexInternalStoragePath.getAbsolutePath(),
                                   optimizedDexOutputPath.getAbsolutePath(),
                                   null,
                                   getClassLoader());
Class libProviderClazz = null;
try {
    // Load the library.
    libProviderClazz =
    cl.loadClass(&quot;com.example.dex.lib.LibraryProvider&quot;);
    // Cast the return object to the library interface so that the
    // caller can directly invoke methods in the interface.
    // Alternatively, the caller can invoke methods through reflection,
    // which is more verbose.
    LibraryInterface lib = (LibraryInterface) libProviderClazz.newInstance();
    lib.showAwesomeToast(this, &quot;hello&quot;);
} catch (Exception e) { ... }
</code></pre><h2 id="构建过程"><a href="#构建过程" class="headerlink" title="##构建过程"></a>##构建过程</h2><p>为了churn out 两个分开的dex文件，我们需要tweak标准的构建过程。完成这个戏法，我们只要简单地修改”-dex”目标，在项目的Ant build.xml中。</p>
<p>修改了的”-dex”目标执行以下操作：</p>
<p>创建两个临时目录去存储.class文件，用来被转换为默认的dex和二级dex。</p>
<p>有选择性的从Project_Root/bin/classes拷贝.class文件到这两个临时目录。</p>
<pre><code>&lt;!-- Primary dex to include everything but the concrete library
           implementation. --&gt;
      &lt;copy todir=&quot;${out.classes.absolute.dir}.1&quot; &gt;
          &lt;fileset dir=&quot;${out.classes.absolute.dir}&quot; &gt;
                  &lt;exclude name=&quot;com/example/dex/lib/**&quot; /&gt;
          &lt;/fileset&gt;
      &lt;/copy&gt;
      &lt;!-- Secondary dex to include the concrete library implementation. --&gt;
      &lt;copy todir=&quot;${out.classes.absolute.dir}.2&quot; &gt;
          &lt;fileset dir=&quot;${out.classes.absolute.dir}&quot; &gt;
                  &lt;include name=&quot;com/example/dex/lib/**&quot; /&gt;
          &lt;/fileset&gt;
      &lt;/copy&gt;     
</code></pre><p>将两个临时目录的.class文件转换成两个分开的dex文件</p>
<p>添加二级dex文件到一个jar文件–DexClassLoader的预期输入格式。最后，存储jar文件到项目的assets目录下。</p>
<pre><code>&lt;!-- Package the output in the assets directory of the apk. --&gt;
        &lt;jar destfile=&quot;${asset.absolute.dir}/secondary_dex.jar&quot;
               basedir=&quot;${out.absolute.dir}/secondary_dex_dir&quot;
               includes=&quot;classes.dex&quot; /&gt;
</code></pre><p>To kick-off the build, you execute ant debug (or release) from the project root directory.</p>
<p>That’s it! In the right situations, dynamic class loading can be quite useful.</p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://yoursite.com/2013/08/01/2013-08-01-dynamic_load/" data-id="cjdnn3tlv0018rpfy95qkya5j" class="article-share-link"><i class="fa fa-share"></i>Compartir</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <article id="post-2013-06-19-viewpage-intercept" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2013/06/19/2013-06-19-viewpage-intercept/">ViewPager TouchEvent流程源码分析</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2013/06/19/2013-06-19-viewpage-intercept/">
            <time datetime="2013-06-18T16:00:00.000Z" itemprop="datePublished">2013-06-19</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/Android/">Android</a>
    </div>

                        
                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <p>由于ViewPager是继承ViewGroup的，所以它需要重写<code>onInterceptTouchEvent(MotionEvent ev)</code>函数，来控制父控件与子控件触摸事件传递流程</p>
<p><a href="http://blog.csdn.net/ddna/article/details/5473293" target="_blank" rel="noopener">知识点： onInterceptTouchEvent和onTouchEvent调用时序</a> 网友总结的知识点</p>
<p><a href="http://developer.android.com/training/gestures/viewgroup.html" target="_blank" rel="noopener">Google官方指南：Managing Touch Events in a ViewGroup</a></p>
<blockquote>
<p>首先吐槽下Google在触摸事件处理流程上的混乱，回调函数中逻辑都乱成浆糊了，ViewPager中仅onInterceptTouchEvent()和onTouchEvent()两个函数就长达270行，中间变量也多的发指！希望将来的能有所改善,类似iOS，清晰回调down，move，cancel等事件</p>
</blockquote>
<p>首先分析public boolean onInterceptTouchEvent(MotionEvent ev)函数，顾名思义是拦截触摸事件的回调函数：</p>
<ul>
<li>返回false: 表示父控件不拦截触摸事件，而将后续的所有事件传递给子控件</li>
<li>返回true:  表示父控件拦截了子控件接收触摸事件的机会，而将后续事件转交给了自己的onTouchEvent()函数去处理。</li>
</ul>
<p>ViewPager使用了两个重要的变量</p>
<ol>
<li>mIsBeingDragged：如果该变量为true，onInterceptionTouchEvent()会立刻返回true，表明”我现在准备要把整个父控件拖动起来了，子控件们都不可能接收到Click,Touch,DoubleClick等触摸事件了”</li>
<li><p>mIsUnableToDrag: 与mIsBeingDragged相对应，表示父控件的触摸手势被判断为不应该拖动，比如Y轴滑动的距离大于了TouchSlop–&gt;<a href="http://developer.android.com/training/gestures/viewgroup.html" target="_blank" rel="noopener">Google术语</a>,向X轴触摸滑动得角度不足等等情况（具体数据是 xDiff*0.5&gt;yDiff ）.</p>
<pre><code> // Nothing more to do here if we have decided whether or not we
// are dragging.
if (action != MotionEvent.ACTION_DOWN) {
    if (mIsBeingDragged) {
        if (DEBUG) Log.v(TAG, &quot;Intercept returning true!&quot;);
        return true;
    }
    if (mIsUnableToDrag) {
        if (DEBUG) Log.v(TAG, &quot;Intercept returning false!&quot;);
        return false;
    }
}
</code></pre></li>
</ol>
<p>如果用伪代码来写onInteceptTouchEvent()的话大概是这样的：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	if(action_cancel||action_up)</span><br><span class="line">	return	false;</span><br><span class="line"></span><br><span class="line">	if(!action_down)</span><br><span class="line">		if (mIsBeingDragged)</span><br><span class="line">			return true;</span><br><span class="line">		if (mIsUnableToDrag)</span><br><span class="line">			return false;</span><br><span class="line">	switch(action)&#123;</span><br><span class="line">		case move:</span><br><span class="line">			if(可以滑动&amp;&amp;不是从屏幕边缘开始触摸滑动的)&#123;</span><br><span class="line">				mIsUnableToDrag=ture;</span><br><span class="line">				return false;</span><br><span class="line">			&#125;</span><br><span class="line">			if(xDiff&gt;mTouchSlop &amp;&amp; xDiff*0.5&gt;yDiff)&#123;</span><br><span class="line">				mIsBeingDragged=true;</span><br><span class="line">			&#125;else if(yDiff&gt;mTouchSlop)&#123;</span><br><span class="line">				mIsUnableToDrag=true;</span><br><span class="line">			&#125;</span><br><span class="line">			if(mIsBeingDragged)&#123;</span><br><span class="line">				//拖动滑行x</span><br><span class="line">				performDrag(x);</span><br><span class="line">			&#125;</span><br><span class="line">			break；</span><br><span class="line">		case down：</span><br><span class="line">			初始化变量</span><br><span class="line">			mIsUnableToDrag=false;</span><br><span class="line"></span><br><span class="line">			//当ViewPager 正在左右页面切换滑动时，我们按下去之后  直接判断为开始滑动状态，</span><br><span class="line">			//mCloseEnough默认值为2(dip),意思是Scroller可能已经快要结束它的动画了，必须要结束X坐标和当前X坐标相差大于2(dip)以上，才认为是还在滑动中</span><br><span class="line">			mScroller.computeScrollOffset();</span><br><span class="line">			if(mScrollState==SCROLL_STATE_SETTLING&amp;&amp;Math.abs(mScroller.getFinalX()-mScroller.getCurrX())&gt;mCloseEnough)&#123;</span><br><span class="line">				mIsBeingDragged=true;</span><br><span class="line">			&#125;else&#123;</span><br><span class="line">				mIsBeingDragged=false;</span><br><span class="line">			&#125;</span><br><span class="line">			break；</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	return mIsBeingDragged;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>好了，我们现在可以假设mIsBeingDragged==true,那么ViewPager就开始回调onTouchEvent(MotionEvent ev)()</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">public boolean onTouchEvent(MotionEvent ev) &#123;</span><br><span class="line">	if (ev.getAction() == MotionEvent.ACTION_DOWN &amp;&amp; ev.getEdgeFlags() != 0) &#123;</span><br><span class="line">		//按下时触摸到的屏幕边缘，则返回false</span><br><span class="line">		return false;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    switch(action)&#123;</span><br><span class="line">    	case down:</span><br><span class="line">    		变量初始化</span><br><span class="line">    		mIsBeingDragged=true;</span><br><span class="line">    		break;</span><br><span class="line">    	case move:</span><br><span class="line">    		if(!mIsBeingDragged)&#123;</span><br><span class="line">    			if(xDiff&gt;mTouchSlop &amp;&amp; xDiff &gt; yDiff)&#123;</span><br><span class="line">    				mIsBeingDragged=true;</span><br><span class="line">    			&#125;</span><br><span class="line">    		&#125;</span><br><span class="line">    		//Not else! Note that mIsBeingDragged can be set above.</span><br><span class="line">    		if(mIsBeingDragged)&#123;</span><br><span class="line">    			 // 页面逻辑</span><br><span class="line">    		&#125;</span><br><span class="line">    		break;</span><br><span class="line">    	case up:</span><br><span class="line">    		if(mIsBeingDragged)&#123;</span><br><span class="line">    			 // 页面逻辑</span><br><span class="line">    			 endDrag();</span><br><span class="line">    		&#125;</span><br><span class="line">    		break;</span><br><span class="line">    	case cancel:</span><br><span class="line">    		if(mIsBeingDragged)&#123;</span><br><span class="line">    			 // 页面逻辑</span><br><span class="line">    			 endDrag();</span><br><span class="line">    		&#125;</span><br><span class="line">    		break;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 可以看出，除了一些特殊情况外，onTouchEvent() 是必定返回true的，页面逻辑里实现了拖动和甩动等效果。</span><br><span class="line">    return true;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="总结"><a href="#总结" class="headerlink" title="##总结"></a>##总结</h2><p>假如我们要定制一个ViewGroup，类似与ViewPager,需要做手势判断的父控件，我们就有可能需要重写OnInteceptTouchEvent()，在move事件里判断手势，并决定是否拦截，在onTouchEvent里对整个ViewGroup做手势动画。</p>
<h2 id="完整源码"><a href="#完整源码" class="headerlink" title="##完整源码"></a>##完整源码</h2><pre><code> &lt;!-- java -&gt;
@Override
public boolean onInterceptTouchEvent(MotionEvent ev) {
    /*
     * This method JUST determines whether we want to intercept the motion.
     * If we return true, onMotionEvent will be called and we do the actual
     * scrolling there.
     */
    final int action = ev.getAction() &amp; MotionEventCompat.ACTION_MASK;

    // Always take care of the touch gesture being complete.
    if (action == MotionEvent.ACTION_CANCEL || action == MotionEvent.ACTION_UP) {
        // Release the drag.
        if (DEBUG) Log.v(TAG, &quot;Intercept done!&quot;);
        mIsBeingDragged = false;
        mIsUnableToDrag = false;
        mActivePointerId = INVALID_POINTER;
        if (mVelocityTracker != null) {
            mVelocityTracker.recycle();
            mVelocityTracker = null;
        }
        return false;
    }

    // Nothing more to do here if we have decided whether or not we
    // are dragging.
    if (action != MotionEvent.ACTION_DOWN) {
        if (mIsBeingDragged) {
            if (DEBUG) Log.v(TAG, &quot;Intercept returning true!&quot;);
            return true;
        }
        if (mIsUnableToDrag) {
            if (DEBUG) Log.v(TAG, &quot;Intercept returning false!&quot;);
            return false;
        }
    }

    switch (action) {
        case MotionEvent.ACTION_MOVE: {
            /*
             * mIsBeingDragged == false, otherwise the shortcut would have caught it. Check
             * whether the user has moved far enough from his original down touch.
             */

            /*
            * Locally do absolute value. mLastMotionY is set to the y value
            * of the down event.
            */
            final int activePointerId = mActivePointerId;
            if (activePointerId == INVALID_POINTER) {
                // If we don&apos;t have a valid id, the touch down wasn&apos;t on content.
                break;
            }

            final int pointerIndex = MotionEventCompat.findPointerIndex(ev, activePointerId);
            final float x = MotionEventCompat.getX(ev, pointerIndex);
            final float dx = x - mLastMotionX;
            final float xDiff = Math.abs(dx);
            final float y = MotionEventCompat.getY(ev, pointerIndex);
            final float yDiff = Math.abs(y - mInitialMotionY);
            if (DEBUG)
                Log.v(TAG, &quot;Moved x to &quot; + x + &quot;,&quot; + y + &quot; diff=&quot; + xDiff + &quot;,&quot; + yDiff);

            if (dx != 0 &amp;&amp; !isGutterDrag(mLastMotionX, dx) &amp;&amp;
                    canScroll(this, false, (int) dx, (int) x, (int) y)) {
                // Nested view has scrollable area under this point. Let it be handled there.
                mLastMotionX = x;
                mLastMotionY = y;
                mIsUnableToDrag = true;
                return false;
            }
            // x轴滑动大于 mTouchSlop  x轴滑动大于y轴滑动两倍
            if (xDiff &gt; mTouchSlop &amp;&amp; xDiff * 0.5f &gt; yDiff) {
                if (DEBUG) Log.v(TAG, &quot;Starting drag!&quot;);
                mIsBeingDragged = true;
                setScrollState(SCROLL_STATE_DRAGGING);

                // mLastMotionX 修正
                mLastMotionX = dx &gt; 0 ? mInitialMotionX + mTouchSlop :
                        mInitialMotionX - mTouchSlop;
                mLastMotionY = y;
                setScrollingCacheEnabled(true);
            } else if (yDiff &gt; mTouchSlop) {
                // The finger has moved enough in the vertical
                // direction to be counted as a drag...  abort
                // any attempt to drag horizontally, to work correctly
                // with children that have scrolling containers.
                if (DEBUG) Log.v(TAG, &quot;Starting unable to drag!&quot;);
                mIsUnableToDrag = true;
            }
            if (mIsBeingDragged) {
                // Scroll to follow the motion event
                if (performDrag(x)) {
                    ViewCompat.postInvalidateOnAnimation(this);
                }
            }
            break;
        }

        case MotionEvent.ACTION_DOWN: {
            /*
             * Remember location of down touch.
             * ACTION_DOWN always refers to pointer index 0.
             */
            mLastMotionX = mInitialMotionX = ev.getX();
            mLastMotionY = mInitialMotionY = ev.getY();
            mActivePointerId = MotionEventCompat.getPointerId(ev, 0);
            mIsUnableToDrag = false;

            mScroller.computeScrollOffset();
            if (mScrollState == SCROLL_STATE_SETTLING &amp;&amp;
                    Math.abs(mScroller.getFinalX() - mScroller.getCurrX()) &gt; mCloseEnough) {
                // Let the user &apos;catch&apos; the pager as it animates.
                mScroller.abortAnimation();
                mPopulatePending = false;
                populate();
                mIsBeingDragged = true;
                setScrollState(SCROLL_STATE_DRAGGING);
            } else {
                completeScroll(false);
                mIsBeingDragged = false;
            }

            if (DEBUG) Log.v(TAG, &quot;Down at &quot; + mLastMotionX + &quot;,&quot; + mLastMotionY
                    + &quot; mIsBeingDragged=&quot; + mIsBeingDragged
                    + &quot;mIsUnableToDrag=&quot; + mIsUnableToDrag);
            break;
        }

        case MotionEventCompat.ACTION_POINTER_UP:
            onSecondaryPointerUp(ev);
            break;
    }

    if (mVelocityTracker == null) {
        mVelocityTracker = VelocityTracker.obtain();
    }
    mVelocityTracker.addMovement(ev);

    /*
     * The only time we want to intercept motion events is if we are in the
     * drag mode.
     */
    return mIsBeingDragged;
}

@Override
public boolean onTouchEvent(MotionEvent ev) {
    if (mFakeDragging) {
        // A fake drag is in progress already, ignore this real one
        // but still eat the touch events.
        // (It is likely that the user is multi-touching the screen.)
        return true;
    }

    if (ev.getAction() == MotionEvent.ACTION_DOWN &amp;&amp; ev.getEdgeFlags() != 0) {
        // Don&apos;t handle edge touches immediately -- they may actually belong to one of our
        // descendants.
        return false;
    }

    if (mAdapter == null || mAdapter.getCount() == 0) {
        // Nothing to present or scroll; nothing to touch.
        return false;
    }

    if (mVelocityTracker == null) {
        mVelocityTracker = VelocityTracker.obtain();
    }
    mVelocityTracker.addMovement(ev);

    final int action = ev.getAction();
    boolean needsInvalidate = false;

    switch (action &amp; MotionEventCompat.ACTION_MASK) {
        case MotionEvent.ACTION_DOWN: {

            mScroller.abortAnimation();
            mPopulatePending = false;
            populate();
            mIsBeingDragged = true;
            setScrollState(SCROLL_STATE_DRAGGING);

            // Remember where the motion event started
            mLastMotionX = mInitialMotionX = ev.getX();
            mLastMotionY = mInitialMotionY = ev.getY();
            mActivePointerId = MotionEventCompat.getPointerId(ev, 0);
            break;
        }
        case MotionEvent.ACTION_MOVE:
            if (!mIsBeingDragged) {
                final int pointerIndex = MotionEventCompat.findPointerIndex(ev, mActivePointerId);
                final float x = MotionEventCompat.getX(ev, pointerIndex);
                final float xDiff = Math.abs(x - mLastMotionX);
                final float y = MotionEventCompat.getY(ev, pointerIndex);
                final float yDiff = Math.abs(y - mLastMotionY);
                if (DEBUG)
                    Log.v(TAG, &quot;Moved x to &quot; + x + &quot;,&quot; + y + &quot; diff=&quot; + xDiff + &quot;,&quot; + yDiff);
                if (xDiff &gt; mTouchSlop &amp;&amp; xDiff &gt; yDiff) {
                    if (DEBUG) Log.v(TAG, &quot;Starting drag!&quot;);

                    mIsBeingDragged = true;
                    mLastMotionX = x - mInitialMotionX &gt; 0 ? mInitialMotionX + mTouchSlop :
                            mInitialMotionX - mTouchSlop;
                    mLastMotionY = y;
                    setScrollState(SCROLL_STATE_DRAGGING);
                    setScrollingCacheEnabled(true);
                }
            }
            // Not else! Note that mIsBeingDragged can be set above.
            if (mIsBeingDragged) {
                // Scroll to follow the motion event
                final int activePointerIndex = MotionEventCompat.findPointerIndex(
                        ev, mActivePointerId);
                final float x = MotionEventCompat.getX(ev, activePointerIndex);
                needsInvalidate |= performDrag(x);
            }
            break;
        case MotionEvent.ACTION_UP:
            if (mIsBeingDragged) {

                final VelocityTracker velocityTracker = mVelocityTracker;
                velocityTracker.computeCurrentVelocity(1000, mMaximumVelocity);
                int initialVelocity = (int) VelocityTrackerCompat.getXVelocity(
                        velocityTracker, mActivePointerId);
                mPopulatePending = true;
                final int width = getWidth();
                final int scrollX = getScrollX();
                final ItemInfo ii = infoForCurrentScrollPosition();
                final int currentPage = ii.position;
                final float pageOffset = (((float) scrollX / width) - ii.offset) / ii.widthFactor;
                final int activePointerIndex =
                        MotionEventCompat.findPointerIndex(ev, mActivePointerId);
                final float x = MotionEventCompat.getX(ev, activePointerIndex);

                final int totalDelta = (int) (x - mInitialMotionX);
                int nextPage = determineTargetPage(currentPage, pageOffset, initialVelocity,
                        totalDelta);

                //Link Add
                if (nextPage == currentPage) {
                    if (mOnPopViewListener != null) {
                        mOnPopViewListener.onPoped();
                    }
                }
                setCurrentItemInternal(nextPage, true, true, initialVelocity);


                mActivePointerId = INVALID_POINTER;
                endDrag();
                needsInvalidate = mLeftEdge.onRelease() | mRightEdge.onRelease();
            }
            break;
        case MotionEvent.ACTION_CANCEL:
            if (mIsBeingDragged) {
                scrollToItem(mCurItem, true, 0, false);
                mActivePointerId = INVALID_POINTER;
                endDrag();
                needsInvalidate = mLeftEdge.onRelease() | mRightEdge.onRelease();
            }
            break;
        case MotionEventCompat.ACTION_POINTER_DOWN: {
            final int index = MotionEventCompat.getActionIndex(ev);
            final float x = MotionEventCompat.getX(ev, index);
            mLastMotionX = x;
            mActivePointerId = MotionEventCompat.getPointerId(ev, index);
            break;
        }
        case MotionEventCompat.ACTION_POINTER_UP:
            onSecondaryPointerUp(ev);
            mLastMotionX = MotionEventCompat.getX(ev,
                    MotionEventCompat.findPointerIndex(ev, mActivePointerId));
            break;
    }
    if (needsInvalidate) {
        ViewCompat.postInvalidateOnAnimation(this);
    }
    return true;
}

private boolean performDrag(float x) {
    boolean needsInvalidate = false;

    final float deltaX = mLastMotionX - x;
    mLastMotionX = x;

    float oldScrollX = getScrollX();
    float scrollX = oldScrollX + deltaX;
    final int width = getWidth();

    float leftBound = width * mFirstOffset;

    // Link modify
    // float rightBound = width * mLastOffset;
    float rightBound = width * mCurItem;
    boolean leftAbsolute = true;
    boolean rightAbsolute = true;

    final ItemInfo firstItem = mItems.get(0);
    final ItemInfo lastItem = mItems.get(mItems.size() - 1);
    if (firstItem.position != 0) {
        leftAbsolute = false;
        leftBound = firstItem.offset * width;
    }

    // 注释
    // if (lastItem.position != mAdapter.getCount() - 1) {
    //        rightAbsolute = false;
    //         rightBound = lastItem.offset * width;
    //    }

    if (scrollX &lt; leftBound) {
        if (leftAbsolute) {
            float over = leftBound - scrollX;
            needsInvalidate = mLeftEdge.onPull(Math.abs(over) / width);
        }
        scrollX = leftBound;
    } else if (scrollX &gt; rightBound) {
        if (rightAbsolute) {
            float over = scrollX - rightBound;

            //Link Modify
            // needsInvalidate = mRightEdge.onPull(Math.abs(over) / width);
            needsInvalidate = true;
        }
        scrollX = rightBound;
    }
    mLastMotionX += scrollX - (int) scrollX;

    scrollTo((int) scrollX, getScrollY());
    pageScrolled((int) scrollX);

    return needsInvalidate;
}
</code></pre>
        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://yoursite.com/2013/06/19/2013-06-19-viewpage-intercept/" data-id="cjdnn3tlu0016rpfy62rm0gsi" class="article-share-link"><i class="fa fa-share"></i>Compartir</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <article id="post-2013-06-19-animating-scroll-gesture" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2013/06/19/2013-06-19-animating-scroll-gesture/">Google官方指南-动画滚动手势</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2013/06/19/2013-06-19-animating-scroll-gesture/">
            <time datetime="2013-06-18T16:00:00.000Z" itemprop="datePublished">2013-06-19</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/Android/">Android</a>
    </div>

                        
                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <p>source:<a href="http://developer.android.com/training/gestures/scroll.html" target="_blank" rel="noopener">http://developer.android.com/training/gestures/scroll.html</a></p>
<p>在Android中，通常我们使用ScrollView类来实现滑动。任何标准的布局都可能超出容器本身的边界，需要嵌套在由框架管理的可滑动视图的ScrollView中去展示。只有在需要特定的场景中，我们才可能需要去实现一个自定的Scroller。本章节描述了这么一个场景，显示一个使用了滑动器，响应触摸手势的滑动效果。</p>
<p>你可以使用Scroller（如 Scroller 或者 OverScroller）去收集生产一个滑动动画所需要响应的触摸事件的数据。它们很类似，但是OverScroller包含指示用户甩动手势已经到达内容边界的方法。InteractiveChart示例使用了EdgeEffect类(准确地说是 EdgeEffectCompat类)去显示发光的效果，当用户到达内容的边界。</p>
<blockquote>
<blockquote>
<blockquote>
<p>注意：我们建议你使用OverScroller而不是Scroller去实现滑动动画。OverScroller为旧的设备提供了最好的向后兼容性。</p>
</blockquote>
</blockquote>
</blockquote>
<p>同样提醒你通常只有你要自己实现滑动时才使用scrollers。ScrollView和HorizontalScrollView已经为你准备好一切，如果你把布局嵌套其中。</p>
<p>Scroller被用于随时间推移动画滚动，使用平台标准的滚动物理（摩擦，速度等）。Scroller其实本身不绘制任何东西。Scrollers随时间推移跟踪滚动偏移，但是他们不会自动地将你的视图移动到那些位置。而是应该由你去获取坐标并且按照一定的速率，以使得滚动动画看起来比较平滑。</p>
<h2 id="理解滚动术语"><a href="#理解滚动术语" class="headerlink" title="##理解滚动术语"></a>##理解滚动术语</h2><p>“Scrolling”在不同的Android中不同的上下文有着不同的含义。</p>
<ul>
<li>滚动是移动视图窗口(viewport–也就是你正看到的内容的窗口)的一般过程。当同时在x和y轴滚动式，称为平移(panning)。在样品应用中提供了这样一个类，InteractiveChart,说明了两种类型的滚动,拖拽和甩动。</li>
<li>拖动是一种滚动–发生在用户将他的手指在触摸屏上拖动。简单的拖动经常是通过重写GestureDetector.OnGestureListener类的onScroll()函数实现的。更多关于拖动的讨论，查看Dragging and Scaling.</li>
</ul>
<p>甩是一种滚动发生在用户拖动并快速抬起他的手指。在用户抬起他的手指后，你通常要保持滚动(移动视口),但是减速滚动直到视口停止移动。甩动作可以通过重写GestureDetector.OnGestureListener类的onFling()实现，并且使用一个scroller类。这就是本主题要将的使用情况。</p>
<p>通常使用scroller对象关联甩手势，但他们可以被用在几乎任何你想要UI去反馈触摸事件显示滚动的上下文中。例如，你可以重写onTouchEvent()直接处理触摸事件，并且产生一个滚动效果或者一个吸附页面（snapping to page）动画响应那些触摸事件</p>
<h2 id="实现基于触摸的滚动"><a href="#实现基于触摸的滚动" class="headerlink" title="##实现基于触摸的滚动"></a>##实现基于触摸的滚动</h2><p>本段描述了如何使用scroller类，下面展示的片段来自InteractiveChart。它使用了GestureDetector，并且重写GestureDetector.SimpleOnGestureListener中的onFling()。使用了OverScroller跟踪甩手势。如果用户在甩手势之后达到了内容的边界，应用会显示一个发光效果。</p>
<blockquote>
<blockquote>
<blockquote>
<p>Note: The InteractiveChart sample app displays a chart that you can zoom, pan, scroll, and so on. In the following snippet, mContentRect represents the rectangle coordinates within the view that the chart will be drawn into. At any given time, a subset of the total chart domain and range are drawn into this rectangular area. mCurrentViewport represents the portion of the chart that is currently visible in the screen. Because pixel offsets are generally treated as integers, mContentRect is of the type Rect. Because the graph domain and range are decimal/float values, mCurrentViewport is of the type RectF.</p>
</blockquote>
</blockquote>
</blockquote>
<p>The first part of the snippet shows the implementation of onFling():</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line">// The current viewport. This rectangle represents the currently visible</span><br><span class="line">// chart domain and range. The viewport is the part of the app that the</span><br><span class="line">// user manipulates via touch gestures.</span><br><span class="line">private RectF mCurrentViewport =</span><br><span class="line">        new RectF(AXIS_X_MIN, AXIS_Y_MIN, AXIS_X_MAX, AXIS_Y_MAX);</span><br><span class="line"></span><br><span class="line">// The current destination rectangle (in pixel coordinates) into which the</span><br><span class="line">// chart data should be drawn.</span><br><span class="line">private Rect mContentRect;</span><br><span class="line"></span><br><span class="line">private OverScroller mScroller;</span><br><span class="line">private RectF mScrollerStartViewport;</span><br><span class="line">...</span><br><span class="line">private final GestureDetector.SimpleOnGestureListener mGestureListener</span><br><span class="line">        = new GestureDetector.SimpleOnGestureListener() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public boolean onDown(MotionEvent e) &#123;</span><br><span class="line">        // Initiates the decay phase of any active edge effects.</span><br><span class="line">        releaseEdgeEffects();</span><br><span class="line">        mScrollerStartViewport.set(mCurrentViewport);</span><br><span class="line">        // Aborts any active scroll animations and invalidates.</span><br><span class="line">        mScroller.forceFinished(true);</span><br><span class="line">        ViewCompat.postInvalidateOnAnimation(InteractiveLineGraphView.this);</span><br><span class="line">        return true;</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">    @Override</span><br><span class="line">    public boolean onFling(MotionEvent e1, MotionEvent e2,</span><br><span class="line">            float velocityX, float velocityY) &#123;</span><br><span class="line">        fling((int) -velocityX, (int) -velocityY);</span><br><span class="line">        return true;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">private void fling(int velocityX, int velocityY) &#123;</span><br><span class="line">    // Initiates the decay phase of any active edge effects.</span><br><span class="line">    releaseEdgeEffects();</span><br><span class="line">    // Flings use math in pixels (as opposed to math based on the viewport).</span><br><span class="line">    Point surfaceSize = computeScrollSurfaceSize();</span><br><span class="line">    mScrollerStartViewport.set(mCurrentViewport);</span><br><span class="line">    int startX = (int) (surfaceSize.x * (mScrollerStartViewport.left -</span><br><span class="line">            AXIS_X_MIN) / (</span><br><span class="line">            AXIS_X_MAX - AXIS_X_MIN));</span><br><span class="line">    int startY = (int) (surfaceSize.y * (AXIS_Y_MAX -</span><br><span class="line">            mScrollerStartViewport.bottom) / (</span><br><span class="line">            AXIS_Y_MAX - AXIS_Y_MIN));</span><br><span class="line">    // Before flinging, aborts the current animation.</span><br><span class="line">    mScroller.forceFinished(true);</span><br><span class="line">    // Begins the animation</span><br><span class="line">    mScroller.fling(</span><br><span class="line">            // Current scroll position</span><br><span class="line">            startX,</span><br><span class="line">            startY,</span><br><span class="line">            velocityX,</span><br><span class="line">            velocityY,</span><br><span class="line">            /*</span><br><span class="line">             * Minimum and maximum scroll positions. The minimum scroll</span><br><span class="line">             * position is generally zero and the maximum scroll position</span><br><span class="line">             * is generally the content size less the screen size. So if the</span><br><span class="line">             * content width is 1000 pixels and the screen width is 200  </span><br><span class="line">             * pixels, the maximum scroll offset should be 800 pixels.</span><br><span class="line">             */</span><br><span class="line">            0, surfaceSize.x - mContentRect.width(),</span><br><span class="line">            0, surfaceSize.y - mContentRect.height(),</span><br><span class="line">            // The edges of the content. This comes into play when using</span><br><span class="line">            // the EdgeEffect class to draw &quot;glow&quot; overlays.</span><br><span class="line">            mContentRect.width() / 2,</span><br><span class="line">            mContentRect.height() / 2);</span><br><span class="line">    // Invalidates to trigger computeScroll()</span><br><span class="line">    ViewCompat.postInvalidateOnAnimation(this);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>当onFling()调用postInvalidateOnAniamtion(),会触发computeScroll()去更新x,y的值。当一个子视图使用scroller动画显示一个滚动时，通常是必须要做的，就像是在例子中一样。</p>
<p>Most views pass the scroller object’s x and y position directly to scrollTo(). The following implementation of computeScroll() takes a different approach—it calls computeScrollOffset() to get the current location of x and y. When the criteria for displaying an overscroll “glow” edge effect are met (the display is zoomed in, x or y is out of bounds, and the app isn’t already showing an overscroll), the code sets up the overscroll glow effect and calls postInvalidateOnAnimation() to trigger an invalidate on the view:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">// Edge effect / overscroll tracking objects.</span><br><span class="line">private EdgeEffectCompat mEdgeEffectTop;</span><br><span class="line">private EdgeEffectCompat mEdgeEffectBottom;</span><br><span class="line">private EdgeEffectCompat mEdgeEffectLeft;</span><br><span class="line">private EdgeEffectCompat mEdgeEffectRight;</span><br><span class="line"></span><br><span class="line">private boolean mEdgeEffectTopActive;</span><br><span class="line">private boolean mEdgeEffectBottomActive;</span><br><span class="line">private boolean mEdgeEffectLeftActive;</span><br><span class="line">private boolean mEdgeEffectRightActive;</span><br><span class="line"></span><br><span class="line">@Override</span><br><span class="line">public void computeScroll() &#123;</span><br><span class="line">    super.computeScroll();</span><br><span class="line"></span><br><span class="line">    boolean needsInvalidate = false;</span><br><span class="line"></span><br><span class="line">    // The scroller isn&apos;t finished, meaning a fling or programmatic pan</span><br><span class="line">    // operation is currently active.</span><br><span class="line">    if (mScroller.computeScrollOffset()) &#123;</span><br><span class="line">        Point surfaceSize = computeScrollSurfaceSize();</span><br><span class="line">        int currX = mScroller.getCurrX();</span><br><span class="line">        int currY = mScroller.getCurrY();</span><br><span class="line"></span><br><span class="line">        boolean canScrollX = (mCurrentViewport.left &gt; AXIS_X_MIN</span><br><span class="line">                || mCurrentViewport.right &lt; AXIS_X_MAX);</span><br><span class="line">        boolean canScrollY = (mCurrentViewport.top &gt; AXIS_Y_MIN</span><br><span class="line">                || mCurrentViewport.bottom &lt; AXIS_Y_MAX);</span><br><span class="line"></span><br><span class="line">        /*          </span><br><span class="line">         * If you are zoomed in and currX or currY is</span><br><span class="line">         * outside of bounds and you&apos;re not already</span><br><span class="line">         * showing overscroll, then render the overscroll</span><br><span class="line">         * glow edge effect.</span><br><span class="line">         */</span><br><span class="line">        if (canScrollX</span><br><span class="line">                &amp;&amp; currX &lt; 0</span><br><span class="line">                &amp;&amp; mEdgeEffectLeft.isFinished()</span><br><span class="line">                &amp;&amp; !mEdgeEffectLeftActive) &#123;</span><br><span class="line">            mEdgeEffectLeft.onAbsorb((int)</span><br><span class="line">                    OverScrollerCompat.getCurrVelocity(mScroller));</span><br><span class="line">            mEdgeEffectLeftActive = true;</span><br><span class="line">            needsInvalidate = true;</span><br><span class="line">        &#125; else if (canScrollX</span><br><span class="line">                &amp;&amp; currX &gt; (surfaceSize.x - mContentRect.width())</span><br><span class="line">                &amp;&amp; mEdgeEffectRight.isFinished()</span><br><span class="line">                &amp;&amp; !mEdgeEffectRightActive) &#123;</span><br><span class="line">            mEdgeEffectRight.onAbsorb((int)</span><br><span class="line">                    OverScrollerCompat.getCurrVelocity(mScroller));</span><br><span class="line">            mEdgeEffectRightActive = true;</span><br><span class="line">            needsInvalidate = true;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        if (canScrollY</span><br><span class="line">                &amp;&amp; currY &lt; 0</span><br><span class="line">                &amp;&amp; mEdgeEffectTop.isFinished()</span><br><span class="line">                &amp;&amp; !mEdgeEffectTopActive) &#123;</span><br><span class="line">            mEdgeEffectTop.onAbsorb((int)</span><br><span class="line">                    OverScrollerCompat.getCurrVelocity(mScroller));</span><br><span class="line">            mEdgeEffectTopActive = true;</span><br><span class="line">            needsInvalidate = true;</span><br><span class="line">        &#125; else if (canScrollY</span><br><span class="line">                &amp;&amp; currY &gt; (surfaceSize.y - mContentRect.height())</span><br><span class="line">                &amp;&amp; mEdgeEffectBottom.isFinished()</span><br><span class="line">                &amp;&amp; !mEdgeEffectBottomActive) &#123;</span><br><span class="line">            mEdgeEffectBottom.onAbsorb((int)</span><br><span class="line">                    OverScrollerCompat.getCurrVelocity(mScroller));</span><br><span class="line">            mEdgeEffectBottomActive = true;</span><br><span class="line">            needsInvalidate = true;</span><br><span class="line">        &#125;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>Here is the section of the code that performs the actual zoom:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">// Custom object that is functionally similar to Scroller</span><br><span class="line">Zoomer mZoomer;</span><br><span class="line">private PointF mZoomFocalPoint = new PointF();</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">// If a zoom is in progress (either programmatically or via double</span><br><span class="line">// touch), performs the zoom.</span><br><span class="line">if (mZoomer.computeZoom()) &#123;</span><br><span class="line">    float newWidth = (1f - mZoomer.getCurrZoom()) *</span><br><span class="line">            mScrollerStartViewport.width();</span><br><span class="line">    float newHeight = (1f - mZoomer.getCurrZoom()) *</span><br><span class="line">            mScrollerStartViewport.height();</span><br><span class="line">    float pointWithinViewportX = (mZoomFocalPoint.x -</span><br><span class="line">            mScrollerStartViewport.left)</span><br><span class="line">            / mScrollerStartViewport.width();</span><br><span class="line">    float pointWithinViewportY = (mZoomFocalPoint.y -</span><br><span class="line">            mScrollerStartViewport.top)</span><br><span class="line">            / mScrollerStartViewport.height();</span><br><span class="line">    mCurrentViewport.set(</span><br><span class="line">            mZoomFocalPoint.x - newWidth * pointWithinViewportX,</span><br><span class="line">            mZoomFocalPoint.y - newHeight * pointWithinViewportY,</span><br><span class="line">            mZoomFocalPoint.x + newWidth * (1 - pointWithinViewportX),</span><br><span class="line">            mZoomFocalPoint.y + newHeight * (1 - pointWithinViewportY));</span><br><span class="line">    constrainViewport();</span><br><span class="line">    needsInvalidate = true;</span><br><span class="line">&#125;</span><br><span class="line">if (needsInvalidate) &#123;</span><br><span class="line">    ViewCompat.postInvalidateOnAnimation(this);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>This is the computeScrollSurfaceSize() method that’s called in the above snippet. It computes the current scrollable surface size, in pixels. For example, if the entire chart area is visible, this is simply the current size of mContentRect. If the chart is zoomed in 200% in both directions, the returned size will be twice as large horizontally and vertically.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">private Point computeScrollSurfaceSize() &#123;</span><br><span class="line">    return new Point(</span><br><span class="line">            (int) (mContentRect.width() * (AXIS_X_MAX - AXIS_X_MIN)</span><br><span class="line">                    / mCurrentViewport.width()),</span><br><span class="line">            (int) (mContentRect.height() * (AXIS_Y_MAX - AXIS_Y_MIN)</span><br><span class="line">                    / mCurrentViewport.height()));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>For another example of scroller usage, see the source code for the ViewPager class. It scrolls in response to flings, and uses scrolling to implement the “snapping to page” animation.</p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://yoursite.com/2013/06/19/2013-06-19-animating-scroll-gesture/" data-id="cjdnn3tlt0014rpfygh59b4ud" class="article-share-link"><i class="fa fa-share"></i>Compartir</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <article id="post-2013-06-14-breath" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2013/06/14/2013-06-14-breath/">呼吸灯特效-使用PropertyAnimation</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2013/06/14/2013-06-14-breath/">
            <time datetime="2013-06-13T16:00:00.000Z" itemprop="datePublished">2013-06-14</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/Android/">Android</a>
    </div>

                        
                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <blockquote>
<p>成人平静时的呼吸频率约为每分钟12-20次;儿童约为每分钟20次;一般女性比男性快1-2次.</p>
</blockquote>
<p>我们假设为平均为15次每分钟吧，一个循环大概是4秒，暂定模拟前2.7后1.3,那么我们就先来编写动画:</p>
<p>animator/anim_breath.xml</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&lt;set xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</span><br><span class="line">	 &lt;!-顺序动画-&gt;</span><br><span class="line">     android:ordering=&quot;sequentially&quot;&gt;</span><br><span class="line">    &lt;set</span><br><span class="line">    	&lt;!--插值器使用立方减速 效果很逼真--&gt;</span><br><span class="line">    	android:interpolator=&quot;@android:interpolator/decelerate_cubic&quot;</span><br><span class="line">    	android:ordering=&quot;together&quot;&gt;</span><br><span class="line">    	&lt;!--同步动画--&gt;</span><br><span class="line">     	&lt;!--X Y轴同时放大5% --&gt;</span><br><span class="line">        &lt;objectAnimator</span><br><span class="line">                android:propertyName=&quot;scaleX&quot;</span><br><span class="line">                android:duration=&quot;2700&quot;</span><br><span class="line">                android:valueTo=&quot;1.05&quot;</span><br><span class="line">                android:valueFrom=&quot;1&quot;</span><br><span class="line">                android:valueType=&quot;floatType&quot;/&gt;</span><br><span class="line">        &lt;objectAnimator</span><br><span class="line">                android:propertyName=&quot;scaleY&quot;</span><br><span class="line">                android:duration=&quot;2700&quot;</span><br><span class="line">                android:valueTo=&quot;1.05&quot;</span><br><span class="line">                android:valueFrom=&quot;1&quot;</span><br><span class="line">                android:valueType=&quot;floatType&quot;/&gt;</span><br><span class="line">    &lt;/set&gt;</span><br><span class="line">    &lt;set</span><br><span class="line">    	android:interpolator=&quot;@android:interpolator/decelerate_cubic&quot;</span><br><span class="line">    	android:ordering=&quot;together&quot;&gt;</span><br><span class="line">	    &lt;!--X Y轴同时缩小回原始大小 --&gt;</span><br><span class="line">        &lt;objectAnimator</span><br><span class="line">                android:propertyName=&quot;scaleX&quot;</span><br><span class="line">                android:duration=&quot;1300&quot;</span><br><span class="line">                android:valueTo=&quot;1&quot;</span><br><span class="line">                android:valueFrom=&quot;1.05&quot;</span><br><span class="line">                android:valueType=&quot;floatType&quot;/&gt;</span><br><span class="line">        &lt;objectAnimator</span><br><span class="line">                android:propertyName=&quot;scaleY&quot;</span><br><span class="line">                android:duration=&quot;1300&quot;</span><br><span class="line">                android:valueTo=&quot;1&quot;</span><br><span class="line">                android:valueFrom=&quot;1.05&quot;</span><br><span class="line">                android:valueType=&quot;floatType&quot;/&gt;</span><br><span class="line">    &lt;/set&gt;</span><br><span class="line">&lt;/set&gt;</span><br></pre></td></tr></table></figure>
<p>然后我们适当的封装下，不知道为什么repeat设置无效，先用这样不妥的方式吧。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">public class BreathAnim &#123;</span><br><span class="line">    AnimatorSet mSet;</span><br><span class="line"></span><br><span class="line">    public BreathAnim(Context ctx, int animRid, Object target) &#123;</span><br><span class="line">        mSet = (AnimatorSet) AnimatorInflater.loadAnimator(ctx, animRid);</span><br><span class="line">        mSet.setTarget(target);</span><br><span class="line">        mSet.addListener(new Animator.AnimatorListener() &#123;</span><br><span class="line">           	 …</span><br><span class="line">           	@Override</span><br><span class="line">            public void onAnimationEnd(Animator animation) &#123;</span><br><span class="line">                //ToDo</span><br><span class="line">                mSet.start();</span><br><span class="line">            &#125;</span><br><span class="line">			...</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void start() &#123;</span><br><span class="line">        mSet.start();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void cancel() &#123;</span><br><span class="line">        mSet.cancel();</span><br><span class="line">        mSet = null;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>最后简单调用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">BreathAnim ba=new BreathAnim(context,R.animator.anim_breath,mTargetView);</span><br><span class="line">ba.start();</span><br></pre></td></tr></table></figure>
<p>给个差不多的效果，但是我没有做亮度这个维度 <a href="http://www.iinterest.net/2009/12/10/breathing-light-botton/" target="_blank" rel="noopener">戳这里-&gt;JS呼吸灯</a></p>
<p><strong>Notice:暂时没有去使用<a href="https://github.com/JakeWharton/NineOldAndroids" target="_blank" rel="noopener">NineOldAndroids</a>,所以只能在API 11+使用，稍微改改还算简单。</strong></p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://yoursite.com/2013/06/14/2013-06-14-breath/" data-id="cjdnn3tlr0012rpfyt8u0sz4d" class="article-share-link"><i class="fa fa-share"></i>Compartir</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <article id="post-2013-06-13-animation-interpolator" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2013/06/13/2013-06-13-animation-interpolator/">Android 四种特殊Interpolator源码解析</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2013/06/13/2013-06-13-animation-interpolator/">
            <time datetime="2013-06-12T16:00:00.000Z" itemprop="datePublished">2013-06-13</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/Android/">Android</a>
    </div>

                        
                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <p>今天介绍4种动画插值器</p>
<ol>
<li>OvershootInterpolator： “Overshoot” means 冲过头了，模拟了冲过了头回滚一点的效果</li>
<li>AnticipateInterpolator：“Anticipate” means 抢先，模拟了出发前先后退一步再前冲的动画效果</li>
<li>AnticipateOvershootInterpolator：以上两种的结合</li>
<li>BounceInterpolator：”Bounce” means 弹跳, 就是模拟了自由落地后回弹的效果</li>
</ol>
<h2 id="OvershootInterpolation"><a href="#OvershootInterpolation" class="headerlink" title="##OvershootInterpolation"></a>##OvershootInterpolation</h2><p>先来看Overshoot的实现的数学公式,mTension默认值为2.0f,有一个构造函数可以进行设置。</p>
<pre><code>public float getInterpolation(float t) {
    t -= 1.0f;
    return t * t * ((mTension + 1) * t + mTension) + 1.0f;
}
</code></pre><p>如果带入默认值，简化下就是</p>
<pre><code>y=3t^3+2t^2+1  // t:[-1~0]
</code></pre><p>然后去google搜索一下”3t^3+2t^2+1”,就能看到下面这个曲线图</p>
<p><img src="http://pic.yupoo.com/wsyanligang_v/CVV0gdj5/14rU1Z.png" alt="overshoot"></p>
<p>我们改下参数mTension,就能发现<code>mTension越大，冲过的距离越大，效果越明显!</code></p>
<h2 id="AnticipateInterpolation"><a href="#AnticipateInterpolation" class="headerlink" title="##AnticipateInterpolation"></a>##AnticipateInterpolation</h2><p>再看下Anticipate的实现数学公式，mTension同样默认是2.0f：</p>
<pre><code>public float getInterpolation(float t) {
    return t * t * ((mTension + 1) * t - mTension);
}
</code></pre><p>于是带上实际参数2.0f，得到</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">y=3t^3-2t^2 //t:[0~1.0]</span><br></pre></td></tr></table></figure>
<p><img src="http://pic.yupoo.com/wsyanligang_v/CVV0gQsS/13bFN5.png" alt="anticipate"></p>
<p>同样的结论：<code>mTension越大，抢先动画约长，效果越明显！</code></p>
<h2 id="BounceInterpolator"><a href="#BounceInterpolator" class="headerlink" title="##BounceInterpolator"></a>##BounceInterpolator</h2><p>从源码我们能发现，实现方式是根据时间t，模拟了一次自由落体运动，所以Google这次帮不了我们了。</p>
<pre><code>private static float bounce(float t) {
    return t * t * 8.0f;
}

public float getInterpolation(float t) {
    t *= 1.1226f;
    if (t &lt; 0.3535f) return bounce(t);
    else if (t &lt; 0.7408f) return bounce(t - 0.54719f) + 0.7f;
    else if (t &lt; 0.9644f) return bounce(t - 0.8526f) + 0.9f;
    else return bounce(t - 1.0435f) + 0.95f;
}
</code></pre>
        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://yoursite.com/2013/06/13/2013-06-13-animation-interpolator/" data-id="cjdnn3tlq0010rpfyngd793m2" class="article-share-link"><i class="fa fa-share"></i>Compartir</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <article id="post-2013-06-10-programmer-competency-matrix" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2013/06/10/2013-06-10-programmer-competency-matrix/">程序员能力矩阵 Programmer Competency Matrix</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2013/06/10/2013-06-10-programmer-competency-matrix/">
            <time datetime="2013-06-09T16:00:00.000Z" itemprop="datePublished">2013-06-10</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/Android/">Android</a>
    </div>

                        
                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <p>wow,总结的太棒了，programmer可以对应的在每个项目上打分，再转出一个直观的图表，就是一份好简历</p>
<p>###<a href="http://static.icybear.net/%5BCN%5DProgrammer%20competency%20matrix.htm" target="_blank" rel="noopener">原文连接</a></p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://yoursite.com/2013/06/10/2013-06-10-programmer-competency-matrix/" data-id="cjdnn3tlp000yrpfyes06fh53" class="article-share-link"><i class="fa fa-share"></i>Compartir</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <nav id="page-nav">
        <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/">Siguiente  &raquo;</a>
    </nav>
</section>
            
                
<aside id="sidebar">
   
        
    <div class="widget-wrap">
        <h3 class="widget-title">Recientes</h3>
        <div class="widget">
            <ul id="recent-post" class="">
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2018/02/15/2017年年终总结/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2018/02/15/2017年年终总结/" class="title">2017年年终总结</a></p>
                            <p class="item-date"><time datetime="2018-02-14T21:59:27.000Z" itemprop="datePublished">2018-02-15</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2018/02/15/hello-world/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2018/02/15/hello-world/" class="title">Hello World</a></p>
                            <p class="item-date"><time datetime="2018-02-14T20:49:39.472Z" itemprop="datePublished">2018-02-15</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2013/11/28/2013-11-28-picasso/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Android/">Android</a></p>
                            <p class="item-title"><a href="/2013/11/28/2013-11-28-picasso/" class="title">Android Picasso-强大的图片下载缓存类库</a></p>
                            <p class="item-date"><time datetime="2013-11-27T16:00:00.000Z" itemprop="datePublished">2013-11-28</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2013/10/30/2013-10-30-display-gif/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Android/">Android</a></p>
                            <p class="item-title"><a href="/2013/10/30/2013-10-30-display-gif/" class="title">Android中显示动画的GIF-Movie类解决方案</a></p>
                            <p class="item-date"><time datetime="2013-10-29T16:00:00.000Z" itemprop="datePublished">2013-10-30</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2013/08/01/2013-08-01-dynamic_load/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Android/">Android</a></p>
                            <p class="item-title"><a href="/2013/08/01/2013-08-01-dynamic_load/" class="title">Custom Class Loading in Dalvik (译)</a></p>
                            <p class="item-date"><time datetime="2013-07-31T16:00:00.000Z" itemprop="datePublished">2013-08-01</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">Categorias</h3>
        <div class="widget">
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/">Android</a><span class="category-list-count">25</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">Archivos</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/11/">November 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/10/">October 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/08/">August 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/06/">June 2013</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/05/">May 2013</a><span class="archive-list-count">14</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/04/">April 2013</a><span class="archive-list-count">1</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">Etiquetas</h3>
        <div class="widget">
            <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/work/">work</a><span class="tag-list-count">1</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">Nube de etiquetas</h3>
        <div class="widget tagcloud">
            <a href="/tags/work/" style="font-size: 10px;">work</a>
        </div>
    </div>

    
        
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">Links</h3>
        <div class="widget">
            <ul>
                
                    <li>
                        <a href="http://hexo.io">Hexo</a>
                    </li>
                
            </ul>
        </div>
    </div>


    
    <div id="toTop" class="fa fa-angle-up"></div>
</aside>

            
        </div>
        <footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            &copy; 2018 Alin<br>
            Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>. Theme by <a href="http://github.com/ppoffice">PPOffice</a>
        </div>
    </div>
</footer>
        


    
        <script src="/libs/lightgallery/js/lightgallery.min.js"></script>
        <script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/libs/lightgallery/js/lg-pager.min.js"></script>
        <script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/libs/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/libs/lightgallery/js/lg-hash.min.js"></script>
        <script src="/libs/lightgallery/js/lg-share.min.js"></script>
        <script src="/libs/lightgallery/js/lg-video.min.js"></script>
    
    
        <script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>
    
    



<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>
</body>
</html>